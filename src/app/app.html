<div class="container">
  <!-- Search Input -->
  <div class="search-container">
    <mat-form-field appearance="outline" class="search-field">
      <mat-label>Search boons by name, description, or prerequisites</mat-label>
      <input matInput 
             [ngModel]="searchTerm()" 
             (ngModelChange)="onSearchChange($event)"
             placeholder="Type to filter boons...">
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  </div>

  <!-- Results Summary -->
  <div class="results-summary" *ngIf="searchTerm()">
    <p>Found {{ filteredBoons().length }} boon(s) matching "{{ searchTerm() }}"</p>
  </div>

  <!-- Pinned Boons Area -->
  <div class="pinned-section" *ngIf="pinnedBoonsData().length > 0">
    <div class="pinned-header">
      <h2>ðŸ“Œ Pinned Boons ({{ pinnedBoonsData().length }})</h2>
      <button mat-raised-button color="warn" (click)="clearAllPins()" class="clear-pins-btn">
        Clear All Pins
      </button>
    </div>
    <div class="total-cost">
      <strong>Total Cost: {{ pinnedTotalCost() }} Boon {{ pinnedTotalCost() === 1 ? 'Point' : 'Points' }}</strong>
    </div>
    <div class="responsive-grid">
      <mat-card *ngFor="let boon of pinnedBoonsData()" class="pinned-card">
        <mat-card-header>
          <mat-card-title>{{ boon.name }}</mat-card-title>
          <mat-card-subtitle *ngIf="boon.pre && boon.pre !== 'No prerequisite'">{{ boon.pre }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p>{{ boon.desc }}</p>
          <div *ngIf="boon.title" class="boon-title">
            <strong>Title:</strong> {{ boon.title }}
          </div>
          <div class="boon-level">
            <strong>Cost:</strong> {{ boon.lvl }} Boon {{ boon.lvl === 1 ? 'Point' : 'Points' }}
          </div>
        </mat-card-content>
        <mat-card-actions>
          <button mat-raised-button color="accent" (click)="togglePin(boon.id)">
            UNPIN
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>

  <div *ngFor="let group of groupedBoons()" class="level-group">
    <h2 class="level-header">Requires {{ group.level }} Boon {{ group.level === 1 ? 'Point' : 'Points' }}</h2>
    
    <div *ngFor="let prereqGroup of group.prerequisiteGroups" class="prerequisite-group">
      <h3 class="prerequisite-header" *ngIf="prereqGroup.prerequisite !== 'No prerequisite'">
        {{ prereqGroup.prerequisite }}
      </h3>
      <h3 class="prerequisite-header no-prereq" *ngIf="prereqGroup.prerequisite === 'No prerequisite'">
        No Prerequisites
      </h3>
      
      <div class="responsive-grid">
        <mat-card *ngFor="let boon of prereqGroup.boons">
          <mat-card-header>
            <mat-card-title>{{ boon.name }}</mat-card-title>
            <mat-card-subtitle *ngIf="boon.pre && boon.pre !== 'No prerequisite'">{{ boon.pre }}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>{{ boon.desc }}</p>
            <div *ngIf="boon.title" class="boon-title">
              <strong>Title:</strong> {{ boon.title }}
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-raised-button 
                    [color]="isPinned(boon.id) ? 'accent' : 'primary'" 
                    (click)="togglePin(boon.id)">
              {{ isPinned(boon.id) ? 'UNPIN' : 'PIN' }}
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </div>
  </div>
</div>

<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content above * * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced.  * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * End of Placeholder  * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->


<router-outlet />
